/* ================================================
   scss/_mqx.scss
   Единый модуль медиамиксинов + короткие алиасы
   ------------------------------------------------
   Доступные миксины:
     at(bp)      → вложенный @media по query/числу (обычно max-width)
     down(bp)    → алиас к at() (читается как «до»)
     up(bp)      → min-width по ключу/числу
     between(a,b)→ диапазон min..max (ключи/числа, можно смешивать)

   Короткие алиасы:
     a(bp)  = at(bp)
     d(bp)  = down(bp)
     u(bp)  = up(bp)
     b(a,b) = between(a,b)

   Шпаргалка (коротко):
     @include d("lpt") { ... }     // <= laptop
     @include a(1200)  { ... }     // <= 1200px
     @include u("dsk") { ... }     // >= desktop
     @include b("mbl","lpt") { ... } // 768..1440

   Кастомизация брейков:
     @use "mqx" as mq with (
       $mqx-breakpoints: (
         "dsk": (query: "(min-width: 1920.02px)", width: 1920),
         "lpt": (query: "(max-width: 1440.98px)", width: 1440),
         "mbl": (query: "(max-width: 767.98px)",  width: 768),
         "tab": (query: "(max-width: 1024.98px)", width: 1024) // пример 4-го
       )
     );

   Затем:
     @include mq.d("lpt") { ... }
     // или подключить без префикса:
     // @use "mqx" as *; → @include d("lpt") { ... }

   ================================================ */

/* ADDED: карта брейкпоинтов по умолчанию */
$mqx-breakpoints: (
  "dsk": (query: "(min-width: 1920.02px)", width: 1920),
  "lpt": (query: "(max-width: 1440.98px)", width: 1440),
  "mbl": (query: "(max-width: 767.98px)",  width: 768)
) !default;

/* ADDED: хелпер — вернуть текст медиавыражения (max-width для числа, иначе query из карты) */
@function _mqx-query($bp) {
  @if type-of($bp) == 'number' {
    @return "(max-width: #{$bp}px)";
  } @else {
    $slot: map-get($mqx-breakpoints, $bp);
    @if $slot { @return map-get($slot, query); }
    @return null;
  }
}

/* ADDED: хелпер — вернуть числовую ширину по ключу/числу (для up/between) */
@function _mqx-width($bp) {
  @if type-of($bp) == 'number' { @return $bp; }
  $slot: map-get($mqx-breakpoints, $bp);
  @if $slot and map-has-key($slot, width) { @return map-get($slot, width); }
  @return null;
}

/* ADDED: базовый миксин — вложенный @media произвольного брейка (обычно max-width) */
@mixin at($bp) {
  $q: _mqx-query($bp);
  @if $q { @media #{$q} { @content; } }
  @else  { @warn "mqx: Unknown breakpoint `#{$bp}`; emitting content without @media."; @content; }
}

/* ADDED: сахар — max-width (алиас к at()) */
@mixin down($bp) { @include at($bp) { @content; } }

/* ADDED: min-width — принимает ключ или число */
@mixin up($bp) {
  $w: _mqx-width($bp);
  @if $w { @media (min-width: #{$w}px) { @content; } }
  @else  { @warn "mqx: Unknown width for `#{$bp}`; emitting content without @media."; @content; }
}

/* ADDED: диапазон min..max — принимает ключи/числа, можно смешивать */
@mixin between($min, $max) {
  $minw: _mqx-width($min);
  $maxw: _mqx-width($max);
  @if $minw != null and $maxw != null {
    @media (min-width: #{$minw}px) and (max-width: #{$maxw}px) { @content; }
  } @else {
    @warn "mqx: Unknown width in between(#{$min}, #{$max}); emitting content without @media.";
    @content;
  }
}
@mixin a($bp)            { @include at($bp)      { @content; } }  // alias to at()
@mixin d($bp)            { @include down($bp)    { @content; } }  // alias to down()
@mixin u($bp)            { @include up($bp)      { @content; } }  // alias to up()
@mixin b($min, $max)     { @include between($min, $max) { @content; } } // alias to between()
